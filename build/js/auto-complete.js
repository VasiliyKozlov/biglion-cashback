"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},autoComplete=function(){function e(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function o(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function s(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function n(e,s,n,l){o(l||document,s,function(o){for(var s,l=o.target||o.srcElement;l&&!(s=t(l,e));)l=l.parentElement;s&&n.call(l,o)})}if(document.querySelector){var l={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(e,t,o){}};for(var c in e)e.hasOwnProperty(c)&&(l[c]=e[c]);for(var a="object"==_typeof(l.selector)?[l.selector]:document.querySelectorAll(l.selector),u=0;u<a.length;u++){var i=a[u];i.sc=document.createElement("div"),i.sc.className="autocomplete-suggestions "+l.menuClass,i.autocompleteAttr=i.getAttribute("autocomplete"),i.setAttribute("autocomplete","off"),i.cache={},i.last_val="",i.updateSC=function(e,t){var o=i.getBoundingClientRect();if(i.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+l.offsetLeft)+"px",i.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+l.offsetTop)+"px",i.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(i.sc.style.display="block",i.sc.maxHeight||(i.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(i.sc,null):i.sc.currentStyle).maxHeight)),i.sc.suggestionHeight||(i.sc.suggestionHeight=i.sc.querySelector(".autocomplete-suggestion").offsetHeight),i.sc.suggestionHeight))if(t){var s=i.sc.scrollTop,n=t.getBoundingClientRect().top-i.sc.getBoundingClientRect().top;n+i.sc.suggestionHeight-i.sc.maxHeight>0?i.sc.scrollTop=n+i.sc.suggestionHeight+s-i.sc.maxHeight:n<0&&(i.sc.scrollTop=n+s)}else i.sc.scrollTop=0},o(window,"resize",i.updateSC),document.body.appendChild(i.sc),n("autocomplete-suggestion","mouseleave",function(e){var t=i.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},i.sc),n("autocomplete-suggestion","mouseover",function(e){var t=i.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},i.sc),n("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var o=this.getAttribute("data-val");i.value=o,l.onSelect(e,o,this),i.sc.style.display="none"}},i.sc),i.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){var e=0}e?i!==document.activeElement&&setTimeout(function(){i.focus()},20):(i.last_val=i.value,i.sc.style.display="none",setTimeout(function(){i.sc.style.display="none"},350))},o(i,"blur",i.blurHandler);var r=function(e){var t=i.value;if(i.cache[t]=e,e.length&&t.length>=l.minChars){for(var o="",s=0;s<e.length;s++)o+=l.renderItem(e[s],t);i.sc.innerHTML=o,i.updateSC(0)}else i.sc.style.display="none"};i.keydownHandler=function(e){var t=window.event?e.keyCode:e.which;if((40==t||38==t)&&i.sc.innerHTML){var o,s=i.sc.querySelector(".autocomplete-suggestion.selected");return s?(o=40==t?s.nextSibling:s.previousSibling,o?(s.className=s.className.replace("selected",""),o.className+=" selected",i.value=o.getAttribute("data-val")):(s.className=s.className.replace("selected",""),i.value=i.last_val,o=0)):(o=40==t?i.sc.querySelector(".autocomplete-suggestion"):i.sc.childNodes[i.sc.childNodes.length-1],o.className+=" selected",i.value=o.getAttribute("data-val")),i.updateSC(0,o),!1}if(27==t)i.value=i.last_val,i.sc.style.display="none";else if(13==t||9==t){var s=i.sc.querySelector(".autocomplete-suggestion.selected");s&&"none"!=i.sc.style.display&&(l.onSelect(e,s.getAttribute("data-val"),s),setTimeout(function(){i.sc.style.display="none"},20))}},o(i,"keydown",i.keydownHandler),i.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(t<35||t>40)&&13!=t&&27!=t){var o=i.value;if(o.length>=l.minChars){if(o!=i.last_val){if(i.last_val=o,clearTimeout(i.timer),l.cache){if(o in i.cache)return void r(i.cache[o]);for(var s=1;s<o.length-l.minChars;s++){var n=o.slice(0,o.length-s);if(n in i.cache&&!i.cache[n].length)return void r([])}}i.timer=setTimeout(function(){l.source(o,r)},l.delay)}}else i.last_val=o,i.sc.style.display="none"}},o(i,"keyup",i.keyupHandler),i.focusHandler=function(e){i.last_val="\n",i.keyupHandler(e)},l.minChars||o(i,"focus",i.focusHandler)}this.destroy=function(){for(var e=0;e<a.length;e++){var t=a[e];s(window,"resize",t.updateSC),s(t,"blur",t.blurHandler),s(t,"focus",t.focusHandler),s(t,"keydown",t.keydownHandler),s(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}}return e}();!function(){"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete}(),new autoComplete({selector:'input[name="search-input"]',minChars:2,source:function(e,t){e=e.toLowerCase();for(var o=["ActionScript","AppleScript","Asp"],s=[],n=0;n<o.length;n++)~o[n].toLowerCase().indexOf(e)&&s.push(o[n]);t(s)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dG8tY29tcGxldGUuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJhdXRvQ29tcGxldGUiLCJvcHRpb25zIiwiaGFzQ2xhc3MiLCJlbCIsImNsYXNzTmFtZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiUmVnRXhwIiwidGVzdCIsImFkZEV2ZW50IiwidHlwZSIsImhhbmRsZXIiLCJhdHRhY2hFdmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudCIsImRldGFjaEV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImxpdmUiLCJlbENsYXNzIiwiZXZlbnQiLCJjYiIsImNvbnRleHQiLCJkb2N1bWVudCIsImUiLCJmb3VuZCIsInRhcmdldCIsInNyY0VsZW1lbnQiLCJwYXJlbnRFbGVtZW50IiwiY2FsbCIsInF1ZXJ5U2VsZWN0b3IiLCJvIiwic2VsZWN0b3IiLCJzb3VyY2UiLCJtaW5DaGFycyIsImRlbGF5Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsImNhY2hlIiwibWVudUNsYXNzIiwicmVuZGVySXRlbSIsIml0ZW0iLCJzZWFyY2giLCJyZXBsYWNlIiwicmUiLCJzcGxpdCIsImpvaW4iLCJvblNlbGVjdCIsInRlcm0iLCJrIiwiaGFzT3duUHJvcGVydHkiLCJlbGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwidGhhdCIsInNjIiwiY3JlYXRlRWxlbWVudCIsImF1dG9jb21wbGV0ZUF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJsYXN0X3ZhbCIsInVwZGF0ZVNDIiwicmVzaXplIiwibmV4dCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzdHlsZSIsImxlZnQiLCJNYXRoIiwicm91bmQiLCJ3aW5kb3ciLCJwYWdlWE9mZnNldCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbExlZnQiLCJ0b3AiLCJib3R0b20iLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsIndpZHRoIiwicmlnaHQiLCJkaXNwbGF5IiwibWF4SGVpZ2h0IiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwiY3VycmVudFN0eWxlIiwic3VnZ2VzdGlvbkhlaWdodCIsIm9mZnNldEhlaWdodCIsInNjclRvcCIsInNlbFRvcCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInNlbCIsInNldFRpbWVvdXQiLCJ0aGlzIiwidiIsInZhbHVlIiwiYmx1ckhhbmRsZXIiLCJvdmVyX3NiIiwiYWN0aXZlRWxlbWVudCIsImZvY3VzIiwic3VnZ2VzdCIsImRhdGEiLCJ2YWwiLCJzIiwiaW5uZXJIVE1MIiwia2V5ZG93bkhhbmRsZXIiLCJrZXkiLCJrZXlDb2RlIiwid2hpY2giLCJuZXh0U2libGluZyIsInByZXZpb3VzU2libGluZyIsImNoaWxkTm9kZXMiLCJrZXl1cEhhbmRsZXIiLCJjbGVhclRpbWVvdXQiLCJ0aW1lciIsInBhcnQiLCJzbGljZSIsImZvY3VzSGFuZGxlciIsImRlc3Ryb3kiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyZW1vdmVDaGlsZCIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0b0xvd2VyQ2FzZSIsImNob2ljZXMiLCJtYXRjaGVzIiwiaW5kZXhPZiIsInB1c2giXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsU0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVUMsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFBT0EsSUFBeUIsa0JBQVhGLFNBQXlCRSxFQUFJQyxjQUFnQkgsUUFBVUUsSUFBUUYsT0FBT0ksVUFBWSxlQUFrQkYsSUFTbFFHLGFBQWUsV0FFZixRQUFTQSxHQUFhQyxHQUlsQixRQUFTQyxHQUFTQyxFQUFJQyxHQUNsQixNQUFPRCxHQUFHRSxVQUFZRixFQUFHRSxVQUFVQyxTQUFTRixHQUFhLEdBQUlHLFFBQU8sTUFBUUgsRUFBWSxPQUFPSSxL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T3RFLGFBQWVBLGdCQUcxSCxHQUFJQSxlQUNBK0IsU0FBVSw2QkFDVkUsU0FBVSxFQUNWRCxPQUFRLFNBQWdCZSxFQUFNcUQsR0FDMUJyRCxFQUFPQSxFQUFLOEUsYUFHWixLQUFLLEdBRkRDLElBQVcsZUFBZ0IsY0FBZSxPQUMxQ0MsS0FDSzNFLEVBQUksRUFBR0EsRUFBSTBFLEVBQVF6RSxPQUFRRCxLQUMzQjBFLEVBQVExRSxHQUFHeUUsY0FBY0csUUFBUWpGLElBQU9nRixFQUFRRSxLQUFLSCxFQUFRMUUsR0FDckVnRCxHQUFRMkIiLCJmaWxlIjoiYXV0by1jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcclxuXHJcbi8qXHJcbiAgICBKYXZhU2NyaXB0IGF1dG9Db21wbGV0ZSB2MS4wLjRcclxuICAgIENvcHlyaWdodCAoYykgMjAxNCBTaW1vbiBTdGVpbmJlcmdlciAvIFBpeGFiYXlcclxuICAgIEdpdEh1YjogaHR0cHM6Ly9naXRodWIuY29tL1BpeGFiYXkvSmF2YVNjcmlwdC1hdXRvQ29tcGxldGVcclxuICAgIExpY2Vuc2U6IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiovXHJcblxyXG52YXIgYXV0b0NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBmdW5jdGlvbiBhdXRvQ29tcGxldGUob3B0aW9ucykge1xyXG4gICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcikgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBoZWxwZXJzXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgOiBuZXcgUmVnRXhwKCdcXFxcYicgKyBjbGFzc05hbWUgKyAnXFxcXGInKS50ZXN0KGVsLmNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRFdmVudChlbCwgdHlwZSwgaGFuZGxlcikge1xyXG4gICAgICAgICAgICBpZiAoZWwuYXR0YWNoRXZlbnQpIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCBoYW5kbGVyKTtlbHNlIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUV2ZW50KGVsLCB0eXBlLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIChlbC5yZW1vdmVFdmVudExpc3RlbmVyKSBub3Qgd29ya2luZyBpbiBJRTExXHJcbiAgICAgICAgICAgIGlmIChlbC5kZXRhY2hFdmVudCkgZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGhhbmRsZXIpO2Vsc2UgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gbGl2ZShlbENsYXNzLCBldmVudCwgY2IsIGNvbnRleHQpIHtcclxuICAgICAgICAgICAgYWRkRXZlbnQoY29udGV4dCB8fCBkb2N1bWVudCwgZXZlbnQsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQsXHJcbiAgICAgICAgICAgICAgICAgICAgZWwgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoZWwgJiYgIShmb3VuZCA9IGhhc0NsYXNzKGVsLCBlbENsYXNzKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB9aWYgKGZvdW5kKSBjYi5jYWxsKGVsLCBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbyA9IHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6IDAsXHJcbiAgICAgICAgICAgIHNvdXJjZTogMCxcclxuICAgICAgICAgICAgbWluQ2hhcnM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5OiAxNTAsXHJcbiAgICAgICAgICAgIG9mZnNldExlZnQ6IDAsXHJcbiAgICAgICAgICAgIG9mZnNldFRvcDogMSxcclxuICAgICAgICAgICAgY2FjaGU6IDEsXHJcbiAgICAgICAgICAgIG1lbnVDbGFzczogJycsXHJcbiAgICAgICAgICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaXRlbSwgc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzXHJcbiAgICAgICAgICAgICAgICBzZWFyY2ggPSBzZWFyY2gucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiKFwiICsgc2VhcmNoLnNwbGl0KCcgJykuam9pbignfCcpICsgXCIpXCIsIFwiZ2lcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJhdXRvY29tcGxldGUtc3VnZ2VzdGlvblwiIGRhdGEtdmFsPVwiJyArIGl0ZW0gKyAnXCI+JyArIGl0ZW0ucmVwbGFjZShyZSwgXCI8Yj4kMTwvYj5cIikgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGUsIHRlcm0sIGl0ZW0pIHt9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoaykpIG9ba10gPSBvcHRpb25zW2tdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaW5pdFxyXG4gICAgICAgIHZhciBlbGVtcyA9IF90eXBlb2Yoby5zZWxlY3RvcikgPT0gJ29iamVjdCcgPyBbby5zZWxlY3Rvcl0gOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG8uc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSBlbGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBzdWdnZXN0aW9ucyBjb250YWluZXIgXCJzY1wiXHJcbiAgICAgICAgICAgIHRoYXQuc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGhhdC5zYy5jbGFzc05hbWUgPSAnYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb25zICcgKyBvLm1lbnVDbGFzcztcclxuXHJcbiAgICAgICAgICAgIHRoYXQuYXV0b2NvbXBsZXRlQXR0ciA9IHRoYXQuZ2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnKTtcclxuICAgICAgICAgICAgdGhhdC5zZXRBdHRyaWJ1dGUoJ2F1dG9jb21wbGV0ZScsICdvZmYnKTtcclxuICAgICAgICAgICAgdGhhdC5jYWNoZSA9IHt9O1xyXG4gICAgICAgICAgICB0aGF0Lmxhc3RfdmFsID0gJyc7XHJcblxyXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZVNDID0gZnVuY3Rpb24gKHJlc2l6ZSwgbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSB0aGF0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zYy5zdHlsZS5sZWZ0ID0gTWF0aC5yb3VuZChyZWN0LmxlZnQgKyAod2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KSArIG8ub2Zmc2V0TGVmdCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5zYy5zdHlsZS50b3AgPSBNYXRoLnJvdW5kKHJlY3QuYm90dG9tICsgKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSArIG8ub2Zmc2V0VG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNjLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSArICdweCc7IC8vIG91dGVyV2lkdGhcclxuICAgICAgICAgICAgICAgIGlmICghcmVzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zYy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoYXQuc2MubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2MubWF4SGVpZ2h0ID0gcGFyc2VJbnQoKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID8gZ2V0Q29tcHV0ZWRTdHlsZSh0aGF0LnNjLCBudWxsKSA6IHRoYXQuc2MuY3VycmVudFN0eWxlKS5tYXhIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoYXQuc2Muc3VnZ2VzdGlvbkhlaWdodCkgdGhhdC5zYy5zdWdnZXN0aW9uSGVpZ2h0ID0gdGhhdC5zYy5xdWVyeVNlbGVjdG9yKCcuYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb24nKS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuc2Muc3VnZ2VzdGlvbkhlaWdodCkgaWYgKCFuZXh0KSB0aGF0LnNjLnNjcm9sbFRvcCA9IDA7ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JUb3AgPSB0aGF0LnNjLnNjcm9sbFRvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbFRvcCA9IG5leHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdGhhdC5zYy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxUb3AgKyB0aGF0LnNjLnN1Z2dlc3Rpb25IZWlnaHQgLSB0aGF0LnNjLm1heEhlaWdodCA+IDApIHRoYXQuc2Muc2Nyb2xsVG9wID0gc2VsVG9wICsgdGhhdC5zYy5zdWdnZXN0aW9uSGVpZ2h0ICsgc2NyVG9wIC0gdGhhdC5zYy5tYXhIZWlnaHQ7ZWxzZSBpZiAoc2VsVG9wIDwgMCkgdGhhdC5zYy5zY3JvbGxUb3AgPSBzZWxUb3AgKyBzY3JUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhZGRFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGF0LnVwZGF0ZVNDKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGF0LnNjKTtcclxuXHJcbiAgICAgICAgICAgIGxpdmUoJ2F1dG9jb21wbGV0ZS1zdWdnZXN0aW9uJywgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbCA9IHRoYXQuc2MucXVlcnlTZWxlY3RvcignLmF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uLnNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsKSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWwuY2xhc3NOYW1lID0gc2VsLmNsYXNzTmFtZS5yZXBsYWNlKCdzZWxlY3RlZCcsICcnKTtcclxuICAgICAgICAgICAgICAgIH0sIDIwKTtcclxuICAgICAgICAgICAgfSwgdGhhdC5zYyk7XHJcblxyXG4gICAgICAgICAgICBsaXZlKCdhdXRvY29tcGxldGUtc3VnZ2VzdGlvbicsICdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbCA9IHRoYXQuc2MucXVlcnlTZWxlY3RvcignLmF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uLnNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsKSBzZWwuY2xhc3NOYW1lID0gc2VsLmNsYXNzTmFtZS5yZXBsYWNlKCdzZWxlY3RlZCcsICcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lICs9ICcgc2VsZWN0ZWQnO1xyXG4gICAgICAgICAgICB9LCB0aGF0LnNjKTtcclxuXHJcbiAgICAgICAgICAgIGxpdmUoJ2F1dG9jb21wbGV0ZS1zdWdnZXN0aW9uJywgJ21vdXNlZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGhpcywgJ2F1dG9jb21wbGV0ZS1zdWdnZXN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIG91dHNpZGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQudmFsdWUgPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIG8ub25TZWxlY3QoZSwgdiwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zYy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aGF0LnNjKTtcclxuXHJcbiAgICAgICAgICAgIHRoYXQuYmx1ckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdmVyX3NiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uczpob3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdmVyX3NiID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghb3Zlcl9zYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQubGFzdF92YWwgPSB0aGF0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zYy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDM1MCk7IC8vIGhpZGUgc3VnZ2VzdGlvbnMgb24gZmFzdCBpbnB1dFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGF0ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFkZEV2ZW50KHRoYXQsICdibHVyJywgdGhhdC5ibHVySGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3VnZ2VzdCA9IGZ1bmN0aW9uIHN1Z2dlc3QoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHRoYXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmNhY2hlW3ZhbF0gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoICYmIHZhbC5sZW5ndGggPj0gby5taW5DaGFycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgKz0gby5yZW5kZXJJdGVtKGRhdGFbaV0sIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfXRoYXQuc2MuaW5uZXJIVE1MID0gcztcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZVNDKDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoYXQuc2Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoYXQua2V5ZG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHdpbmRvdy5ldmVudCA/IGUua2V5Q29kZSA6IGUud2hpY2g7XHJcbiAgICAgICAgICAgICAgICAvLyBkb3duICg0MCksIHVwICgzOClcclxuICAgICAgICAgICAgICAgIGlmICgoa2V5ID09IDQwIHx8IGtleSA9PSAzOCkgJiYgdGhhdC5zYy5pbm5lckhUTUwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsID0gdGhhdC5zYy5xdWVyeVNlbGVjdG9yKCcuYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb24uc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0ga2V5ID09IDQwID8gdGhhdC5zYy5xdWVyeVNlbGVjdG9yKCcuYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb24nKSA6IHRoYXQuc2MuY2hpbGROb2Rlc1t0aGF0LnNjLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV07IC8vIGZpcnN0IDogbGFzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTmFtZSArPSAnIHNlbGVjdGVkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52YWx1ZSA9IG5leHQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBrZXkgPT0gNDAgPyBzZWwubmV4dFNpYmxpbmcgOiBzZWwucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsLmNsYXNzTmFtZSA9IHNlbC5jbGFzc05hbWUucmVwbGFjZSgnc2VsZWN0ZWQnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTmFtZSArPSAnIHNlbGVjdGVkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmFsdWUgPSBuZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbC5jbGFzc05hbWUgPSBzZWwuY2xhc3NOYW1lLnJlcGxhY2UoJ3NlbGVjdGVkJywgJycpO3RoYXQudmFsdWUgPSB0aGF0Lmxhc3RfdmFsO25leHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQudXBkYXRlU0MoMCwgbmV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZXNjXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXkgPT0gMjcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52YWx1ZSA9IHRoYXQubGFzdF92YWw7dGhhdC5zYy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PSAxMyB8fCBrZXkgPT0gOSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbCA9IHRoYXQuc2MucXVlcnlTZWxlY3RvcignLmF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uLnNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsICYmIHRoYXQuc2Muc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLm9uU2VsZWN0KGUsIHNlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsJyksIHNlbCk7c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYWRkRXZlbnQodGhhdCwgJ2tleWRvd24nLCB0aGF0LmtleWRvd25IYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoYXQua2V5dXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB3aW5kb3cuZXZlbnQgPyBlLmtleUNvZGUgOiBlLndoaWNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFrZXkgfHwgKGtleSA8IDM1IHx8IGtleSA+IDQwKSAmJiBrZXkgIT0gMTMgJiYga2V5ICE9IDI3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHRoYXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5sZW5ndGggPj0gby5taW5DaGFycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9IHRoYXQubGFzdF92YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubGFzdF92YWwgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhhdC50aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5jYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgaW4gdGhhdC5jYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0KHRoYXQuY2FjaGVbdmFsXSk7cmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyByZXF1ZXN0cyBpZiBwcmV2aW91cyBzdWdnZXN0aW9ucyB3ZXJlIGVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB2YWwubGVuZ3RoIC0gby5taW5DaGFyczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gdmFsLnNsaWNlKDAsIHZhbC5sZW5ndGggLSBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgaW4gdGhhdC5jYWNoZSAmJiAhdGhhdC5jYWNoZVtwYXJ0XS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3QoW10pO3JldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnNvdXJjZSh2YWwsIHN1Z2dlc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgby5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lmxhc3RfdmFsID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhZGRFdmVudCh0aGF0LCAna2V5dXAnLCB0aGF0LmtleXVwSGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICB0aGF0LmZvY3VzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0Lmxhc3RfdmFsID0gJ1xcbic7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmtleXVwSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKCFvLm1pbkNoYXJzKSBhZGRFdmVudCh0aGF0LCAnZm9jdXMnLCB0aGF0LmZvY3VzSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBwdWJsaWMgZGVzdHJveSBtZXRob2RcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gZWxlbXNbaV07XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGF0LnVwZGF0ZVNDKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KHRoYXQsICdibHVyJywgdGhhdC5ibHVySGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh0aGF0LCAnZm9jdXMnLCB0aGF0LmZvY3VzSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh0aGF0LCAna2V5ZG93bicsIHRoYXQua2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhhdCwgJ2tleXVwJywgdGhhdC5rZXl1cEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuYXV0b2NvbXBsZXRlQXR0cikgdGhhdC5zZXRBdHRyaWJ1dGUoJ2F1dG9jb21wbGV0ZScsIHRoYXQuYXV0b2NvbXBsZXRlQXR0cik7ZWxzZSB0aGF0LnJlbW92ZUF0dHJpYnV0ZSgnYXV0b2NvbXBsZXRlJyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoYXQuc2MpO1xyXG4gICAgICAgICAgICAgICAgdGhhdCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF1dG9Db21wbGV0ZTtcclxufSgpO1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIGRlZmluZSgnYXV0b0NvbXBsZXRlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBhdXRvQ29tcGxldGU7XHJcbiAgICB9KTtlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBhdXRvQ29tcGxldGU7ZWxzZSB3aW5kb3cuYXV0b0NvbXBsZXRlID0gYXV0b0NvbXBsZXRlO1xyXG59KSgpO1xyXG5cclxubmV3IGF1dG9Db21wbGV0ZSh7XHJcbiAgICBzZWxlY3RvcjogJ2lucHV0W25hbWU9XCJzZWFyY2gtaW5wdXRcIl0nLFxyXG4gICAgbWluQ2hhcnM6IDIsXHJcbiAgICBzb3VyY2U6IGZ1bmN0aW9uIHNvdXJjZSh0ZXJtLCBzdWdnZXN0KSB7XHJcbiAgICAgICAgdGVybSA9IHRlcm0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB2YXIgY2hvaWNlcyA9IFsnQWN0aW9uU2NyaXB0JywgJ0FwcGxlU2NyaXB0JywgJ0FzcCddO1xyXG4gICAgICAgIHZhciBtYXRjaGVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaG9pY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh+Y2hvaWNlc1tpXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGVybSkpIG1hdGNoZXMucHVzaChjaG9pY2VzW2ldKTtcclxuICAgICAgICB9c3VnZ2VzdChtYXRjaGVzKTtcclxuICAgIH1cclxufSk7Il19
